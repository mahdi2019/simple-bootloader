# اولین سیستم عامل من :دی

## بوت لودری به زبان اسمبلی

## پیش نیاز
* اندکی دانش از زبان های سطح پایین مانند زبان *سی* و
سیستم عامل لینوکس برای نصب کامپایلر و شبیه ساز  
* برای نصب برنامه های مورد نیاز کافیست دستور زیر را در ترمینال لینوکس خود وارد کنید  
```
sudo apt-get install build-essential qemu nasm
```

## اطلاعاتی در مورد نحوه ی شروع ب کار سیستم عامل

بعد از اینکه دکمه پاور رو میزنیم.بایوس اجرا میشود.بایوس در ابتدا
<abbr title="POST = power on safe test">پست</abbr>
را اجرا میکند که مسعول چک کردن قظعات کامپیوتری من جمله (سی پی یو)وکارت گرافیک و رم و کیبورد و موس میباشد.(زمانی که بوق میخورد این تست صورت میگیرد).بعد از آن بایوس وارد روند اصلی خود شده.ینی میاید 512بایت از اولین سکتور حافظه را میخواند برای اجرای بوت لودر .بوت لودر در ادرس  
`0x7C00`  
 حافظه شروع میشود.نکته مهم این است که در دوبایت اخر از اولین 512 بایت سکتوراخر مقدار زیر نوشته شده است که ب عدد طلایی معروف است و نشان دهنه این است که در این 512 بایت اول بوت لودری نوشته شده است یا نه  
 `0x55aa`  

برای نوشتن بوت لودر در بایوس باید از اسمبلی 16بیتی استفاده کنیم برای نوشتن کدمان.


## نحوه اجرا
کافیست دستورات زیر را در ترمینال لینوکس ب ترتیب بزنید  
```
nasm -f bin -o myfirst.bin myfirst.asm
```
با این دستور کد اسمبلی خود را به باینری خام تبدیل میکنیم با استفاده از نسم.  
فلگ دش اف ب نسم میگوید که فایل باینری ما را ب فایل اجرایی لینوکس تبدیل نکند و ب ساده ترین شکل ممکن باینری کند  
فلگ دش او نیز ب نسم میگوید خروجی را در فایل  مای فرستدات بین ذخیره کند  

```
dd status=noxfer conv=notrunc if=myfirst.bin of=myfirst.flp
```
با این دستور مد خود را در اولین سکتور از فلاپی دیسک ذخیره میکنیم.بعد از این مرحله میتوانیم با استفاده از شبیه ساز بوت لودر خود را امتحان کنیم  با دستور زیر :  

```
qemu-system-i386 -fda myfirst.flp
```
و تامام :دی  
سیستم عاملتان بالا اومد :)  
شما میتوانید کد خود را در فلاپی دیسک واقعی نیز ذخیره کنید بعدا  
```
mkisofs -o myfirst.iso -b myfirst.flp cdiso/
```
با دستور بالا یک فایل ایمیج ب اسم مای فرست دات ایزو تولید میکنید که قابلیت بوت شدن دارد.حالا شما میتوانید این فایل را درسی دی خودتان بنویسید و سیستم عامل خودتان را بالا بیاورید.  
* توجه:باید ایمیج ایزو رو مستقیم تو سی دی بنویسید تا در 521 بایت اول ذخیره کند و کپی کردن خالی کافی نیست :()



------

## Authors

**mahdi heidari** - [mahdi2019](https://github.com/mahdi2019)

---

## License

This project is licensed under the MIT License [LICENSE](LICENSE).

---
## Task-Lists
- [x] complete code
- [ ] complete Document

---
## Reference
[2017 Mike Saunders and MikeOS Developers](http://mikeos.sourceforge.net/write-your-own-os.html)
